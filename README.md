# Guabot-V2使用指南
依赖于[mai-bot](https://github.com/Diving-Fish/mai-bot)开源项目，基于[Nonebot2](https://github.com/nonebot/nonebot2)，以**舞萌DX**查询为主的多功能~~(自用)~~QQbot

项目地址：https://github.com/Linxaee/Guabot

## 开始

详细可参考[mai-bot](https://github.com/Diving-Fish/mai-bot)开源项目

1. 下载static文件夹并放置根目录src下，[下载链接](https://www.aliyundrive.com/s/oh8E7GfQtD3)，提取码 g1e9
2. 下载[arcaea插件](https://github.com/SEAFHMC/nonebot-plugin-arcaeabot)中的data文件夹，放置根目录src下
2. 通过
 ```  
 pip install poetry
 ```
安装poetry后，转到bot.py目录下

3. 运行

```
poetry shell
```
激活虚拟环境

4. 运行
```
poetry install
```
安装完成后

5. 通过

```
cat requirements.txt | grep -E '^[^# ]' | cut -d= -f1 | xargs -n 1 poetry add
```

6. 导入依赖，随后运行

```
nb run
```

以启动bot，下图为启动成功控制台输出

![image-20220920220026658](C:\Users\GG\AppData\Roaming\Typora\typora-user-images\image-20220920220026658.png)

指令相关可以使用 "瓜瓜 help" 或者 "/help" 调出帮助文档

bug有点多，测试修改ing

## 指令列表 

例子中<>中内容代表需要填入项，[]中内容代表选择其中一项,(）中内容代表可选项，输入指令时均不需要携带括号本身，同时请注意指令是否需要空格




arc相关
---------------------
请输入arc help / a help 查看



maimai相关
---------------------
1. 今日运势: 查看今日舞萌运势

   

2. XXXmaimaiXXX什么: 随机一首歌

3. 随个[dx/标准] [绿黄红紫白]<难度>: 随机一首指定条件的乐曲

4. 查歌 <乐曲标题的一部分>: 查询符合条件的乐曲

5. [绿黄红紫白]id<歌曲编号>: 查询乐曲信息或谱面信息

   

6. 定数查歌 <定数>: 查询定数对应的乐曲

7. 定数查歌 <定数下限> <定数上限>: 查询定数处于给定范围的乐曲

8. 分数线 <难度+歌曲id> <分数线>: 详情请输入“分数线 帮助”查看

   

9. 瓜瓜 b40/b40/查<用户名>成分: 查看自己或者某位用户的b40

10. 瓜瓜 底分分析/底分分析: 查看乐曲推荐和底分分析

    

11. <歌曲别名>是什么歌: 查询乐曲别名对应的乐曲

12. <歌曲别名>有什么别名: 查询乐曲的其它别名

13. 添加别名 <歌曲id> <歌曲别名>: 为指定id的歌曲添加别名

    

14. <标级>定数表 (仅支持8-15）: 查看某标级定数表

15. <标级>完成表  (仅支持8-15）: 查看某标级rank完成表

16. <标级>分数列表 (页号)  (仅支持8-15）: 查看某标级分数列表

    

17. <牌子名>进度: 查看某牌子进度

18. <牌子名>完成表: 查看牌子完成表

    

19. info [别名/id]: 查看单曲成绩

    

20. 瓜瓜 <机厅名称>几/<机厅名称><人数>: 查看机厅人数纪录/纪录机厅人数

21. 机厅列表: 查看记录的机厅列表

22. 添加机厅 <机厅名称>: 纪录一个新的机厅

23. 删除机厅 <机厅名称>: 删除一个记录的机厅

娱乐相关
---------------------------
1. 瓜瓜 来点龙 / 来点龙图 / /dragon /随个龙: 随机一张龙图

2. 瓜瓜 来点fu / 来点fufu / /fufu /随个fu: 随机一张fufu

   

3. 群友圣经: 随机一份群友圣经

4. 瓜瓜 添加圣经 <需添加内容>: 为本群添加圣经

疫情相关
-------------------------
1. 疫情动态 <市名/国内>: 查看某市或者国内疫情动态

2. 风险区 <市名> <区名/关键字> (页码): 查看某地区风险区列表

   

### 更新说明

-----------

##### 2022-9-20

1. bot总体从2.0.0a13.post1版本升级至2.0.0-beta.5，具体更新可以查阅[官网文档](https://v2.nonebot.dev/docs/)

2. 新增arc查分插件(需自行申请url和token)

   [插件项目地址及使用说明](https://github.com/SEAFHMC/nonebot-plugin-arcaeabot)
   
3. 新增[复读插件]

   [插件项目地址及使用说明](https://github.com/ninthseason/nonebot-plugin-repeater)
##### 2022-9-19

1. 新增机厅人数纪录功能

##### 2022-9-18

1. 新增单曲成绩查询功能

##### 2022-9-17

1. 新增查询牌子进度功能
2. 新增查询牌子完成表功能
2. 取消了登录功能，变更为通过接口获取玩家数据

##### 2022-9-15

1. 想写的都写完了，以后再补充


### 鸣谢

-------------

感谢 [Diving-Fish](https://github.com/Diving-Fish) 提供的源码支持

